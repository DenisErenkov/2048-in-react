(this["webpackJsonp2048-in-react"]=this["webpackJsonp2048-in-react"]||[]).push([[0],{18:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var i=n(1),c=n.n(i),r=n(10),a=n.n(r),o=n(3),u=n(2),s=n(7),l=n(25),b=n(0),j=c.a.createContext({length:0}),d=function(t){var e=t.children,n=t.length,i=void 0===n?0:n;return Object(b.jsx)(j.Provider,{value:{length:i},children:e})},f=n(12),O=n(9),v=n(4),h=250,p=1,E={tiles:{},byIds:[],hasChanged:!1,inMotion:!1},m=function(t,e){switch(e.type){case"CREATE_TILE":return Object(u.a)(Object(u.a)({},t),{},{tiles:Object(u.a)(Object(u.a)({},t.tiles),{},Object(v.a)({},e.tile.id,e.tile)),byIds:[].concat(Object(O.a)(t.byIds),[e.tile.id]),hasChanged:!1});case"UPDATE_TILE":return Object(u.a)(Object(u.a)({},t),{},{tiles:Object(u.a)(Object(u.a)({},t.tiles),{},Object(v.a)({},e.tile.id,e.tile)),hasChanged:!0});case"MERGE_TILE":var n=t.tiles,i=e.source.id,c=e.destination.id,r=(n[i],n[c],Object(s.a)(n,[i,c].map(f.a)));return Object(u.a)(Object(u.a)({},t),{},{tiles:Object(u.a)(Object(u.a)({},r),{},Object(v.a)({},e.destination.id,{id:e.destination.id,value:e.source.value+e.destination.value,position:e.destination.position})),byIds:t.byIds.filter((function(t){return t!==e.source.id})),hasChanged:!0});case"START_MOVE":return Object(u.a)(Object(u.a)({},t),{},{inMotion:!0});case"END_MOVE":return Object(u.a)(Object(u.a)({},t),{},{inMotion:!1});default:return t}},x=function(){var t=Object(i.useRef)(!0),e=[function(){return p++}],n=Object(o.a)(e,1)[0],c=Object(i.useReducer)(m,E),r=Object(o.a)(c,2),a=r[0],s=r[1],l=a.tiles,b=a.byIds,j=a.hasChanged,d=a.inMotion,f=Object(i.useCallback)((function(t){var e=t.position,i=t.value,c={id:n(),position:e,value:i};s({type:"CREATE_TILE",tile:c})}),[n]),v=function(t,e){setTimeout((function(){return function(t,e){s({type:"MERGE_TILE",source:t,destination:e})}(t,e)}),h)},x=function(t){s({type:"UPDATE_TILE",tile:t})},g=function(t,e){var n=t.position[0]!==e.position[0],i=t.position[1]!==e.position[1];return n||i},T=Object(i.useCallback)((function(){var t=new Array(16).fill(0);return b.forEach((function(e){var n=l[e].position,i=M(n);t[i]=e})),t}),[b,l]),y=Object(i.useCallback)((function(){return T().reduce((function(t,e,n){return 0===e?[].concat(Object(O.a)(t),[C(n)]):t}),[])}),[T]),w=Object(i.useCallback)((function(){var t=y();if(t.length>0){var e=t[Math.floor(Math.random()*t.length)];f({position:e,value:2})}}),[y,f]),M=function(t){return 4*t[1]+t[0]},C=function(t){return[t%4,Math.floor(t/4)]};return Object(i.useEffect)((function(){if(t.current)return f({position:[0,1],value:2}),f({position:[0,2],value:2}),void(t.current=!1);!d&&j&&w()}),[j,d,f,w]),[b.map((function(t){return l[t]})),function(){var t=T();s({type:"START_MOVE"});for(var e=function(e){var n=[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]].filter((function(t){return 0!==t})),i=void 0,c=0;n.forEach((function(t,n){var r=l[t];if(void 0!==i&&i.value===r.value){var a=Object(u.a)(Object(u.a)({},r),{},{position:i.position,mergeWith:i.id});return v(a,i),i=void 0,c+=1,x(a)}var o=Object(u.a)(Object(u.a)({},r),{},{position:C(4*e+n-c)});if(i=o,g(r,o))return x(o)}))},n=0;n<4;n+=1)e(n);setTimeout((function(){return s({type:"END_MOVE"})}),h)},function(){var t=T();s({type:"START_MOVE"});for(var e=function(e){var n=[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]].filter((function(t){return 0!==t})).reverse(),i=void 0,c=0;n.forEach((function(t,n){var r=l[t];if(void 0!==i&&i.value===r.value){var a=Object(u.a)(Object(u.a)({},r),{},{position:i.position,mergeWith:i.id});return v(a,i),i=void 0,c+=1,x(a)}var o=Object(u.a)(Object(u.a)({},r),{},{position:C(4*e+3+c-n)});if(i=o,g(r,o))return x(o)}))},n=0;n<4;n+=1)e(n);setTimeout((function(){return s({type:"END_MOVE"})}),h)},function(){var t=T();s({type:"START_MOVE"});for(var e=function(e){var n=[t[e+0],t[e+4],t[e+8],t[e+12]].filter((function(t){return 0!==t})),i=void 0,c=0;n.forEach((function(t,n){var r=l[t];if(void 0!==i&&i.value===r.value){var a=Object(u.a)(Object(u.a)({},r),{},{position:i.position,mergeWith:i.id});return v(a,i),i=void 0,c+=1,x(a)}var o=Object(u.a)(Object(u.a)({},r),{},{position:C(e+4*(n-c))});if(i=o,g(r,o))return x(o)}))},n=0;n<4;n+=1)e(n);setTimeout((function(){return s({type:"END_MOVE"})}),h)},function(){var t=T();s({type:"START_MOVE"});for(var e=function(e){var n=[t[e+0],t[e+4],t[e+8],t[e+12]].filter((function(t){return 0!==t})).reverse(),i=void 0,c=0;n.forEach((function(t,n){var r=l[t];if(void 0!==i&&i.value===r.value){var a=Object(u.a)(Object(u.a)({},r),{},{position:i.position,mergeWith:i.id});return v(a,i),i=void 0,c+=1,x(a)}var o=Object(u.a)(Object(u.a)({},r),{},{position:C(e+4*(3-n+c))});if(i=o,g(r,o))return x(o)}))},n=0;n<4;n+=1)e(n);setTimeout((function(){return s({type:"END_MOVE"})}),h)}]},g=(n(18),function(){return Object(b.jsx)("div",{className:"grid",children:function(){for(var t=[],e=0;e<16;e+=1)t.push(Object(b.jsx)("div",{className:"grid-cell"},"".concat(e)));return t}()})}),T=n(11),y=function(t){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=t})),e.current},w=(n(19),function(t){var e=t.value,n=t.position,c=t.zIndex,r=n[0]<4&&n[1]<4;Object(T.a)(r,"Tile out of bound");var a=Object(i.useState)(1),u=Object(o.a)(a,2),s=u[0],l=u[1],d=[Object(i.useContext)(j).length],f=Object(o.a)(d,1)[0],O=y(e),v=void 0===y(n)||O!==e;Object(i.useEffect)((function(){v&&(l(1.1),setTimeout((function(){return l(1)}),100))}),[v,s]);var h=function(t){return t/4*f},p={top:h(n[1]),left:h(n[0]),transform:"scale(".concat(s,")"),zIndex:c};return Object(b.jsx)("div",{className:"tile tile-".concat(e),style:p,children:e})}),M=(n(20),["id"]),C=function(){var t=Object(i.useRef)(null),e=Object(i.useState)(0),n=Object(o.a)(e,2),c=n[0],r=n[1],a=x(),j=Object(o.a)(a,5),f=j[0],O=j[1],v=j[2],p=j[3],E=j[4],m=Object(l.a)((function(t){switch(t.code){case"ArrowLeft":O();break;case"ArrowRight":v();break;case"ArrowUp":p();break;case"ArrowDown":E()}}),h,{leading:!0,trailing:!1});Object(i.useEffect)((function(){null!==t.current&&r(t.current.offsetWidth)}),[]),Object(i.useEffect)((function(){return window.addEventListener("keydown",m),function(){window.removeEventListener("keydown",m)}}),[m]);return Object(b.jsxs)("div",{className:"board",children:[Object(b.jsx)(d,{length:c,children:Object(b.jsx)("div",{className:"tile-container",ref:t,children:function(){if(0===c)return null;var t=f.map((function(t){var e=t.id,n=Object(s.a)(t,M);return Object(b.jsx)(w,Object(u.a)(Object(u.a)({},n),{},{zIndex:e}),"tile-".concat(e))}));return Object(b.jsx)(b.Fragment,{children:t})}()})}),Object(b.jsx)(g,{})]})},I=(n(21),function(t){var e=t.children,n=t.onClick;return Object(b.jsx)("button",{className:"button",onClick:n,children:e})}),_=(n(22),function(){var t=Object(i.useState)(new Date),e=Object(o.a)(t,2),n=e[0],c=e[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Play 2048"})}),Object(b.jsx)("div",{children:Object(b.jsx)(I,{onClick:function(){c(new Date)},children:"Restart"})})]}),Object(b.jsx)(C,{},n.toISOString()),Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:"Wondering how was that built?"})," You can find a video tutorial and code here:"]}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://www.youtube.com/channel/UCJV16_5c4A0amyBZSI4yP6A",target:"_blank",children:"YouTube"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://github.com/mateuszsokola/2048-in-react/",target:"_blank",children:"Source code (Github)"})})]}),Object(b.jsxs)("p",{children:["This game (2048) was built using ",Object(b.jsx)("b",{children:"React"})," and ",Object(b.jsx)("b",{children:"TypeScript"}),". The unique part of this example is animations. The animations in React aren't that straightforward, so I hope you can learn something new from it."]})]}),Object(b.jsxs)("div",{className:"footer",children:["Made with \u2764\ufe0f by"," ",Object(b.jsx)("a",{href:"https://www.youtube.com/channel/UCJV16_5c4A0amyBZSI4yP6A",target:"_blank",children:"Matt Sokola"})]})]})}),k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),i(t),c(t),r(t),a(t)}))};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(_,{})}),document.getElementById("root")),k()}},[[23,1,2]]]);
//# sourceMappingURL=main.4c6e8ae1.chunk.js.map