(this["webpackJsonp2048-in-react"]=this["webpackJsonp2048-in-react"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(1),c=n.n(i),r=n(10),a=n.n(r),o=n(3),u=(n(17),n(0)),s=function(t){var e=t.children,n=t.onClick;return Object(u.jsx)("button",{className:"button",onClick:n,children:e})},l=n(26),b=n(2),d=n(7),j=c.a.createContext({containerWidth:0,tileCount:O}),f=function(t){var e=t.children,n=t.containerWidth,i=void 0===n?0:n,c=t.tileCount,r=void 0===c?O:c;return Object(u.jsx)(j.Provider,{value:{containerWidth:i,tileCount:r},children:e})},h=function(){var t=Object(i.useContext)(j);return[t.containerWidth,t.tileCount]},O=(n(19),4),v=n(8),p=(n(20),function(){var t=h(),e=Object(o.a)(t,2)[1];return Object(u.jsx)("div",{className:"grid",children:function(){for(var t=e*e,n=[],i=0;i<t;i+=1)n.push(Object(u.jsx)("div",{className:"grid-cell"},"".concat(i)));return n}()})}),x=n(11),m=function(t){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=t})),e.current},w=(n(21),function(t){var e=t.value,n=t.position,c=t.zIndex,r=h(),a=Object(o.a)(r,2),s=a[0],l=a[1],b=Object(i.useState)(1),d=Object(o.a)(b,2),j=d[0],f=d[1],O=m(e),v=m(n),p=n[0]<l&&n[1]<l;Object(x.a)(p,"Tile out of bound");var w=void 0===v||O!==e;Object(i.useEffect)((function(){w&&(f(1.1),setTimeout((function(){return f(1)}),100))}),[w,j]);var g=function(t){return t/l*s},E={top:g(n[1]),left:g(n[0]),transform:"scale(".concat(j,")"),zIndex:c};return Object(u.jsx)("div",{className:"tile tile-".concat(e),style:E,children:e})}),g=(n(22),["id"]),E=function(t){var e=t.tiles,n=t.tileCountPerRow,i=void 0===n?O:n,c=116*i,r=c+16,a=e.map((function(t){var e=t.id,n=Object(v.a)(t,g);return Object(u.jsx)(w,Object(b.a)(Object(b.a)({},n),{},{zIndex:e}),"tile-".concat(e))}));return Object(u.jsx)("div",{className:"board",style:{width:r},children:Object(u.jsxs)(f,{containerWidth:c,tileCount:i,children:[Object(u.jsx)("div",{className:"tile-container",children:a}),Object(u.jsx)(p,{})]})})},y=1,C=n(12),T=n(4),k={tiles:{},byIds:[],hasChanged:!1,inMotion:!1},I=function(t,e){switch(e.type){case"CREATE_TILE":return Object(b.a)(Object(b.a)({},t),{},{tiles:Object(b.a)(Object(b.a)({},t.tiles),{},Object(T.a)({},e.tile.id,e.tile)),byIds:[].concat(Object(d.a)(t.byIds),[e.tile.id]),hasChanged:!1});case"UPDATE_TILE":return Object(b.a)(Object(b.a)({},t),{},{tiles:Object(b.a)(Object(b.a)({},t.tiles),{},Object(T.a)({},e.tile.id,e.tile)),hasChanged:!0});case"MERGE_TILE":var n=t.tiles,i=e.source.id,c=e.destination.id,r=(n[i],n[c],Object(v.a)(n,[i,c].map(C.a)));return Object(b.a)(Object(b.a)({},t),{},{tiles:Object(b.a)(Object(b.a)({},r),{},Object(T.a)({},e.destination.id,{id:e.destination.id,value:e.source.value+e.destination.value,position:e.destination.position})),byIds:t.byIds.filter((function(t){return t!==e.source.id})),hasChanged:!0});case"START_MOVE":return Object(b.a)(Object(b.a)({},t),{},{inMotion:!0});case"END_MOVE":return Object(b.a)(Object(b.a)({},t),{},{inMotion:!1});default:return t}},A=void 0,M=function(){var t=Object(i.useRef)(!0),e=[function(){return y++}],n=Object(o.a)(e,1)[0],c=Object(i.useReducer)(I,k),r=Object(o.a)(c,2),a=r[0],u=r[1],s=a.tiles,l=a.byIds,j=a.hasChanged,f=a.inMotion,h=Object(i.useCallback)((function(t){var e=t.position,i=t.value,c={id:n(),position:e,value:i};u({type:"CREATE_TILE",tile:c})}),[n]),v=function(t,e){setTimeout((function(){return function(t,e){u({type:"MERGE_TILE",source:t,destination:e})}(t,e)}),250)},p=function(t){u({type:"UPDATE_TILE",tile:t})},x=Object(i.useCallback)((function(){var t=new Array(O*O).fill(0);return l.forEach((function(e){var n=s[e].position,i=g(n);t[i]=e})),t}),[l,s]),m=Object(i.useCallback)((function(){return x().reduce((function(t,e,n){return 0===e?[].concat(Object(d.a)(t),[E(n)]):t}),[])}),[x]),w=Object(i.useCallback)((function(){var t=m();if(t.length>0){var e=t[Math.floor(Math.random()*t.length)];h({position:e,value:2})}}),[m,h]),g=function(t){return t[1]*O+t[0]},E=function(t){return[t%O,Math.floor(t/O)]},C=function(t,e){u({type:"START_MOVE"});for(var n=O-1,i=function(i){var c=t(i),r=void 0,a=0;c.forEach((function(t,c){var o=s[t];if(void 0!==r&&r.value===o.value){var u=Object(b.a)(Object(b.a)({},o),{},{position:r.position,mergeWith:r.id});return v(u,r),r=void 0,a+=1,p(u)}var l=Object(b.a)(Object(b.a)({},o),{},{position:E(e(i,c,a,n))});if(r=l,function(t,e){var n=t.position[0]!==e.position[0],i=t.position[1]!==e.position[1];return n||i}(o,l))return p(l)}))},c=0;c<O;c+=1)i(c);setTimeout((function(){return u({type:"END_MOVE"})}),250)};return Object(i.useEffect)((function(){if(t.current)return h({position:[0,1],value:2}),h({position:[0,2],value:2}),void(t.current=!1);!f&&j&&w()}),[j,f,h,w]),[l.map((function(t){return s[t]})),C.bind(A,(function(t){var e=x();return[e[t*O+0],e[t*O+1],e[t*O+2],e[t*O+3]].filter((function(t){return 0!==t}))}),(function(t,e,n,i){return t*O+e-n})),C.bind(A,(function(t){var e=x();return[e[t*O+0],e[t*O+1],e[t*O+2],e[t*O+3]].filter((function(t){return 0!==t})).reverse()}),(function(t,e,n,i){return t*O+i+n-e})),C.bind(A,(function(t){var e=x();return[e[t+0*O],e[t+1*O],e[t+2*O],e[t+3*O]].filter((function(t){return 0!==t}))}),(function(t,e,n,i){return t+O*(e-n)})),C.bind(A,(function(t){var e=x();return[e[t+0*O],e[t+1*O],e[t+2*O],e[t+3*O]].filter((function(t){return 0!==t})).reverse()}),(function(t,e,n,i){return t+O*(i-e+n)}))]},_=function(){var t=M(),e=Object(o.a)(t,5),n=e[0],c=e[1],r=e[2],a=e[3],s=e[4],b=Object(l.a)((function(t){switch(t.preventDefault(),t.code){case"ArrowLeft":c();break;case"ArrowRight":r();break;case"ArrowUp":a();break;case"ArrowDown":s()}}),250,{leading:!0,trailing:!1});return Object(i.useEffect)((function(){return window.addEventListener("keydown",b),function(){window.removeEventListener("keydown",b)}}),[b]),Object(u.jsx)(E,{tiles:n,tileCountPerRow:O})},R=(n(23),function(){var t=Object(i.useState)(new Date),e=Object(o.a)(t,2),n=e[0],c=e[1];return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Play 2048"})}),Object(u.jsx)("div",{children:Object(u.jsx)(s,{onClick:function(){c(new Date)},children:"Restart"})})]}),Object(u.jsx)(_,{},n.toISOString()),Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Wondering how was that built?"})," You can find a video tutorial and code here:"]}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"https://www.youtube.com/channel/UCJV16_5c4A0amyBZSI4yP6A",target:"_blank",children:"Tutorial (YouTube)"})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"https://github.com/mateuszsokola/2048-in-react/",target:"_blank",children:"Source code (Github)"})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"https://mateuszsokola.github.io/2048-animation-examples/",target:"_blank",children:"Animation Examples (Github Pages)"})})]}),Object(u.jsxs)("p",{children:["This game (2048) was built using ",Object(u.jsx)("b",{children:"React"})," and ",Object(u.jsx)("b",{children:"TypeScript"}),". The unique part of this example is animations. The animations in React aren't that straightforward, so I hope you can learn something new from it."]})]}),Object(u.jsxs)("div",{className:"footer",children:["Made with \u2764\ufe0f by"," ",Object(u.jsx)("a",{href:"https://www.youtube.com/channel/UCJV16_5c4A0amyBZSI4yP6A",target:"_blank",children:"Matt Sokola"})]})]})}),S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),i(t),c(t),r(t),a(t)}))};a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root")),S()}],[[24,1,2]]]);
//# sourceMappingURL=main.fbe6bd3d.chunk.js.map